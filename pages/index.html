<!DOCTYPE html>
<html>
  <head>
    <title>Serving static file</title>
    <!-- IMORT BOOTSTRAP -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <!-- IMPORT CUSTOM STYLES -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="page-container">
        <h1>หวัดดีงับเอิน</h1>
        <p>
           ถ้าจะ serve html แสดงว่าเราเซียนขึ้นมาอีกขั้นแล้ว เวรี่กู้ด
          ต่อจากนี้จะเริ่มแอดว๊านส์ขึ้นละ มาดูกันว่าต้องทำอะไรบ้าง
        </p>
        <div class="container">
          <div class="card">
            <h2>Git</h2>
            <p>Git คือระบบในการทำ version control ซึ่งจะช่วยจัดการการทั้งการจัดเก็บและประวัติในการ develop ของเรา
              โดย service ต่างๆที่เราจะใช้ในการ deploy web ของเราจะใช้งานร่วมกับระบบ git
            </p>
            <p>
              เราสามารถ install git ได้โดยเข้าไปท่ี่<a href="https://git-scm.com/download/win">ลิ้งค์นี้</a>
              เมื่อ install เราก็มาลองทดสอบว่าเวิร์คมั้ย โดยการเข้าโปรแกรม cmd แล้วพิมพ์
              <code>git --version</code>
              ถ้าขึ้น version เป็นตัวเลขออกมาแสดงว่าเวิ้คแล้ว
              <img src="images/img-1.png"/>
              ต่อมาเราก็เข้าไปที่ <a href="https://www.github.com">www.github.com</a> เพื่อสมัคร account ใหม่
            </p>
             <p>
              github เป็นหนึ่งในหลายระบบที่เป็นตัวเก็บ git version ของงาน develop เราจะใช้ account ของ github ในการ pull โปรเจก
              นี้มาใช้เป็นของตัวเอง
            </p>
            <p>
              เมื่อสมัครเสร็จเราก็ใส่ account ของเราใน git เครื่องเรา โดยเข้าโปรแกรม cmd แล้วพิมพ์
              <code>git config --global user.name "ชื่อ account หรือ email"</code>
              พอใส่ account เสร็จก็จะสามารถ pull โปรเจกนี้ไปใช้ได้ โดยการพิมพ์ 
              <code>git clone https://github.com/Chanokthorn/static-file-server-for-earnz.git</code>
              <img src="images/img-2.png" class="img-fluid"/>
            </p>
            <p>
          </div>
        </div>
        <div class="container">
          <div class="card">
            <h2>Project Structure</h2>
            <p>
              structure ของโปรเจกเราจะเป็นตามนี้
            </p>
              <div class="diagram-container">
                  ./
                  |
                  -- Procfile
                  |
                  -- node_modules
                  |
                  -- public/
                  |   |
                  |   -- images/
                  |   |   |
                  |   |   -- img-1.png
                  |   |   |
                  |   |   -- img-2.png
                  |   -- style.css
                  -- pages/
                  |   |
                  |   -- index.html
                  -- index.js
                  |
                  -- package.json
                  |
                  |
                  -- package-lock.json
                  |
                  |
                  -- .gitignore
              </div>
              <ol>
                <li>
                  <h3>Procfile</h3>
                  <p>เป็นหนึ่งในไฟล์ setting ของ Heroku (ชื่อนี้อาจจะยังไม่คุ้น แต่เดี๋ยวเราจะได้ใช้มันละ)</p>
                </li>
                <li>
                  <h3>node_modules</h3>
                  <p>เป็นโฟลเด้อร์สำหรับเก็บ library ของ js ต่างๆ (ความจริงเป็นภาษา nodejs)</p>
                </li>
                <li>
                  <h3>public</h3>
                  <p>เป็นโฟลเด้อร์ที่เราจะใช้เก็บไฟล์ต่างๆที่ไม่ใช้ .html ความจริงไม่จำเป็นต้องแบ่งโฟลเด้อร์แบบนี้ แต่เราทำให้มันเป็นระบบจะได้ dev ได้ง่ายขึ้น</p>
                </li>
                <li>
                  <h3>pages</h3>
                  <p>เป็นโฟลเด้อร์สำหรับเก็บไฟล์ .html คอนเซปคือถ้าเรามีหน้า html กี่หน้า ก็ให้ใส่เข้ามาในโฟลเด้อร์นี้ทั้งหมด</p>
                </li>
                <li>
                  <h3>index.js</h3>
                  <p>ไฟล์ js หลักที่จะใช้สั่งให้เปิด process ที่จะ serve ไฟล์ต่างๆ เช่น .html, .css, .img ซึ่งเวลาเราเริ่ม process จะเริ่มจากการอ่านไฟล์นี้</p>
                  <p>ในไฟล์นี้จะสั่งให้เมื่อเข้ามาในเว็บของเรา "https://{ชื่อเว็บเรา}/" จะ serve ไฟล์ pages/index.html ซึ่งก็คือหน้านี้ที่กำลังอ่านอยู่แหละ 
                    ส่วนถ้าต้องการไฟล์อะไรเพิ่ม เช่น "https://{ชื่อเว็บเรา}/images/img-1.png จะ serve ไฟล์ images/img-1.png
                    ถ้าจะทำให้ serve index.html เวลาเช้า "https://{ชื่อเว็บเรา}/pages/index.html" ก็ทำได้เหมือนกันนะ แต่ชื่อเว็บจะประหลาด เราเลยไม่ทำแบบนั้น
                  </p>
                </li>
                <li>
                  <h3>package.json, package-lock.json</h3>
                  <p>คือไฟล์ที่คอยเก็บ dependency หรือ ชื่อและ version ของ js ที่เราจะใช้ ซึ่งเวลาโหลดมามันก็จะมาเก็บใน node_modules</p>
                </li>
                <li>
                  <h3>.gitignore</h3>
                  <p>เป็นไฟล์ setting ของ git ที่จะบอก git ว่าเราจะไม่อัพโหลดไฟล์ไหนขึ้นไปเก็บบ้าง มีประโยชน์เวลาจะไม่เก็บไฟล์ที่ใหญ่จริงๆ และโหลดทีหลังได้เช่น library ต่างๆ หรือไฟล์ที่มีข้อมูลสำคัญเช่น password</p>
                </li>
              </ol>
            </p>
          </div>
        </div>
      <div class="container">
        <div class="card">
          <h2>Nodejs</h2>
          <p>หลังจากมีไฟล์แล้ว เรามาลองรันโปรแกรมบนเครื่องก่อนดีกว่า เปิด vscode ขึ้นมาแล้วเข้า File -> Add Folder to Workspace แล้วเลือกโฟลเด้อร์โปรเจกที่เราสร้างขึ้นมา</p>
          <img src="images/img-4.png" class="img-fluid"/>
          <p>ต่อมา เข้า Terminal -> New Terminal </p>
          <p>จะเห็นด้านล่างว่ามี tab เหมือน cmd ขึ้นมาบน vscode</p>
          <img src="images/img-3.png" class="img-fluid"/>
          <p>cmd ด้านล่างก็เหมือน cmd ที่เราใช้แหละ แค่ไม่ต้องเปลี่ยนโปรแกรมไปมา ชีวิตก็จะดีขึ้น หลังจากนี้เวลาจะสั่งอะไรในโปรเจกก็พิมพ์ในนี้ได้เลย</p>
          <br>
          <img src="images/img-6.png" class="img-fluid" style="max-width: 200px;"/>
          <p>
            ต่อมาเราจะต้อง install nodejs กับ npm ก่อน nodejs จะเป็น compiler ของโค้ด js และ npm จะเป็นโปรแกรมสำหรับจัดการ library ต่างๆที่โค้ดเราใช้
          </p>
          <p>สามารถ install nodejs ได้ที่<a href="https://nodejs.org/en/download/">ลิ้งค์นี้</a></p>
          <p>ทีนี้เรามาเริ่มรันโปรแกรมกัน ก่อนอื่นเราจะ serve เว็บของเราบนเครื่องตัวเองก่อน โดนทำตามนี้</p>
          <ol>
            <li>
              พิมพ์โค้ดนี้ลงใน terminal ด้านล่างเลย
              <code>npm install</code>
              <p>คำสั่งนี้จะอ่าน package.json และ package-lock.json เพื่อดูว่าโปรเจกของเราใช้ library อะไรบ้าง หลังจากนั้นจะ download library เหล่านั้นและเก็บไว้ใน node_modules(เริ่มคุ้นชื่อโฟลเด้อร์นี้ยังง)</p>
            </li>
            <li>
              <code>node index.js</code>
              <p>คำสั่งนี้จะใช้ nodejs รันโค้ด index.js ของเรา</p>
              <img src="images/img-5.png" class="img-thumbnail"/>
             <p>ถ้าขึ้นตามนี้แสดงว่าโปรแกรมเรารันแล้ว yess เข้าไปเชคดูได้ โดยเข้าลิ้งค์นี้ใน web browser "http://localhost:5000/"</p>
            </li>
          </ol>
        </div>
      </div>
      <div class="container">
        <div class="card">
          <h2>Heroku</h2>
          <img src="images/img-10.png" class="img-fluid" style="max-width: 200px;"/>
          <p>เป็น service ที่จะทำให้การ deploy และ serve เว็บของเราให้เป็นเรื่องง่ายมาก โดย Heroku จะทำงานด้วยคอนเซปของ git
            เรามาเริ่มการ deploy ด้วย heroku กันก่อนดีกว่า
          </p>
          <p class="warning">รายละเอียดด้านล่างจะเป็นไปตาม document ของ Heroku 
            แนะนำว่าหลังทำเสร็จหรือสงสัยอะไรให้อ่านเพิ่มเติมที่<a href="https://devcenter.heroku.com/articles/getting-started-with-nodejs#set-up">ลิ้งค์นี้</a></p>
          <ol>
            <li>
              <h3>Installation</h3>
              <p>สามารถ sign up Heroku ได้ตาม<a href="https://signup.heroku.com/">ลิ้งค์นี้</a></p>
              <p>ถัดจากนั้นเราก็ install heroku ตาม<a href="https://devcenter.heroku.com/articles/getting-started-with-nodejs#set-up">ลิ้งค์นี้</a>เลย</p>
              <p>เมื่อ install เสร็จสามารถเช็คผลได้ด้วยคำสั่งนี้</p>
              <code>heroku</code>
              <p>ถ้าผลลัพธ์ออกมาเป็นตามรูปตามด้านล่างแสดงว่าพร้อมใช้งาน heroku แล้วจ้า</p>
              <img src="images/img-7.png" class="img-fluid"/>
            </li>
            <li>
              <h3>Deploy</h3>
              <p>เรามาเริ่มสร้างเว็บไซท์ของเราดีกว่า พิมพ์คำสั่ง</p>
              <code>heroku create</code>
              <img src="images/img-8.png" class="img-fluid"/>
              <p>คำสั่งนี้จะทำให้ Heroku สร้าง server ขึ้นมาและพร้อมให้เรา push code ของเราขึ้นไป serve</p>
              <p>url ที่ heroku สร้างให้จะมั่วๆเสมอ ตอนนี้ url ของเราเป็น <a href="https://thawing-reef-60871.herokuapp.com/">https://thawing-reef-60871.herokuapp.com/</a>
                ซึ่งถ้าเราเข้าไปตอนนี้จะยังไม่มีอะไร เพราะเรายังไม่ได้ push คอนเท้นท์ของเรา
              </p>
              <p>การ push code ของเราทำได้ตามนี้</p>
              <p>git push heroku master</p>
              <p>เบื้องหลังคำสั่งนี้เราจะมาดูกันภายหลังนะ แต่คร่าวคือคำสั่งนี้จะ push โปรเจกของเราขึ้นไปบน online repository ของ heroku ซึ่งคำสั่ง "heroku create" ที่
                เราสั่งไว้คราวที่แล้วได้แอบเซทคำว่า heroku บนโปรเจกเราเป็น online repository ที่จะอ่านและ deploy บน url https://thawing-reef-60871.herokuapp.com/ แล้ว
              </p>
              <img src="images/img-9.png" class="img-fluid"/>
              <p>ถ้าขึ้นตามนี้แสดงว่าเราได้ push โค้ดเราไปบน online repository ของ heroku แล้วและ heroku ได้ deploy โปรเจกเราไปบน 
                <a href="https://thawing-reef-60871.herokuapp.com/">https://thawing-reef-60871.herokuapp.com/</a> แล้ว สามารถเข้าไปเชคได้เลย ถ้าทำแล้วเวิ้คแสดงว่าเซียนแล้ว
              </p>
            </li>
            <li>
              <h3>Renaming</h3>
              <p>หลังจากดีใจเสร็จแล้วเรามาทำให้ลิ้งค์เราสวยขึ้นอีกนิดนึง ในคำสั่งด้านล่างนี้ให้แทนคำว่า newname เป็นชื่อเว็บที่เราต้องการเลยนะ พยายามคิดคำที่มันจะไม่ซ้ำกับคนอื่น</p>
              <code>heroku apps:rename newname</code>
              <p>เสร็จแล้ววว ทีนี้ลิ้งค์ของเราก็จะถูกเปลี่ยนละ ลิ้งค์เดิมจะไม่เวิร์คอีกต่อไป</p>
              <p>นอกจากนี้เราสามารถเปิดเว็บของเราจากโปรเจกได้โดยไม่ต้องพิมพ์ url โดยสั่งตามนี้</p>
              <code>heroku open</code>
              <p>คำสั่งนี้จะเปิดเว็บของเราขึ้นมานั่นเอง</p>
            </li>
          </ol>
        </div>
      </div>
      <div class="container">
        <div class="card">
          <h2>Making Changes</h2>
          <p>ต่อมาเรามาทำการเปลี่ยนคอนเท้นท์ในหน้านี้กัน โดยขั้นตอนการเปลี่ยนแปลงจะเป็นไปตามการทำงานของ git ทั้งหมด</p>
          <p>ก่อนจะเริ่มกัน เรามาดูว่าสภาพของ git repository ของเราเป็นยังไงบ้างดีกว่า</p>
          <img src="images/img-11.png" class="img-fluid"/>
          <ol>
            <li>
              <p>ตอนคนเขียน push code เข้าใน online repo ของ git ทำให้ online repo นั้นเป็นเวอร์ชั่นล่าสุดที่เขียนตอนนั้น</p>
            </li>
            <li>
              <p>เมื่อสั่ง git clone จะดึงโปรเจกจาก online repo ของ git มาไว้ที่เครื่องของตัวเอง (local repo) และนอกจากนั้น <h6>local repo จะจำ online repo ของ git ไว้ในชื่อของ origin</h6>
                ซึ่งความจริงจะเป็นชื่ออะไรนอกจาก origin ก็ได้แต่ถ้าเราไม่ได้ไปสั่ง ชื่อนี้จะเซทอัตโนมัต</p>
            </li>
            <li>
              <p>คำสั่ง git add . คือการเพิ่มไฟล์ทุกไฟล์ในโฟลเด้อปัจจุบันใน เข้าสู่สิ่งที่จะ commit ซึ่งการ commit จะเหมือนการ save ไฟล์ของ repo ดังนั้นตามจริงแล้ว ถ้าเราแก้ไฟล์ในโฟลเด้อปัจจุบันบนเครื่องเราโดย
                ที่เรายังไม่ commit ไฟล์ต่างๆที่เราแก้หรือเพ่ิมจะยังไม่อยู่ใน local repo ส่วน "." ในคำสั่งเป็นตัวย่อของการ "add ทุกอย่างในโฟลเด้อยกเว้นไฟล์ที่อยู่ใน .gitignore ลงไปในสิ่งที่จะ commit"
              </p>
              <p>
                นอกจากนี้เราสามารถตรวจสอบสิ่งที่เรากำลังจะ add เข้าไปใน commit ด้วยคำสั่ง <code>git status</code>
              </p>
              <img src="images/img-13.png" class="img-fluid"/>
            </li>
            <li>
              <p>การ commit จะต้องมี message เสมอเพื่อทำให้เมื่อเราย้อนหลังกลับมาดูจะรู้ว่าแต่ละ commit เราทำอะไรไปบ้าง</p>
            </li>
            <li>
              <p>คำสั่งนี้จะ push commit ล่าสุดใน local repo ขึ้นไปบน remote repo ของ heroku</p>
              <p>แล้ว local repo ของเรารู้ได้ไงว่าคำว่า "heroku" มี url อะไร ลองพิมพ์คำสั่ง<code>git remote get-url heroku </code></p>
              <img src="images/img-12.png" class="img-fluid"/>
              <p>จะเห็นว่า url ของ remote repo ชื่อ heroku ได้ถูก set ไว้แล้ว ที่เป็นอย่างงี้เพราะคำสั่ง "heroku create" ที่เราสั่งไว้ก่อนหน้านี้จะสร้าง online repo ของ heroku ขึ้นมาใหม่ และจะเพ่ิม
                url ของ online repo นั้นเข้าไปใน local repo ของเราและจำไว้ในชื่อ "heroku"
              </p>
            </li>
            <li>
              <p>หลังจาก push ไปแล้ว heroku จะเริ่มทำงาน deploy ของมันเองจ้า</p>
            </li>
          </ol>
    </div>
  </body>
</html>
